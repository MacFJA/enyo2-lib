enyo.kind({name:"enyo.localize",kind:enyo.Object,statics:{source:"en_US",destination:"fr_FR",list:[],getList:function(){return this.list},autoDetectDestination:function(){if(navigator.browserLanguage)var a=navigator.browserLanguage;else if(navigator.language)a=navigator.language;else return!1;var f=a.indexOf("-"),d=a.length;return 5<=d&&7>=d&&(2==f||3==f)?(this.destination=a.substr(0,f)+"_"+a.substring(f+1,d).toUpperCase(),!0):-1==f&&(2==d||3==d)?(this.destination=a.toLowerCase(),!0):!1},addArray:function(a){for(var f=0,d=a.length;f<d;f++)this.addLocalization(a[f])},addLocalization:function(a){this.list.push(a)},pluralSearch:function(a,f){var d=/\{\$\w+\|.[^}]+\}/g,h=d.exec(a);if(!h)return a;var h=h[0],b=h.split("|"),k=b.length,e=b[0].substring(2),j=b[b.length-1];b[b.length-1]=j.substring(0,j.length-1);for(var l=f?void 0==f[e]?"*":f[e]:"*",c=1;c<k;c++)d=b[c].split(":"),b[c]={id:d[0],text:d[1]};d=RegExp("\\$"+e,"g");for(c=1;c<k;c++)j=b[c].text,b[c].text=j.replace(d,"{$"+e+"}");e="";for(c=1;c<k;c++)b[c].id==l&&(e=b[c].text);if(!e)for(c=1;c<k;c++)"*"==b[c].id&&(e=b[c].text);a=a.substring(0,a.indexOf(h))+e+a.substring(a.indexOf(h)+h.length);return this.pluralSearch(a,f)}}});enyo.T=function(a,f){for(var d=enyo.localize.source,h=d.substr(0,2),b=enyo.localize.destination,k=b.substr(0,2),e=a,j=0,l=enyo.localize.getList(),c=l.length,i=0;j<c;j++){var g=l[j];if(a==g[d]||a==g[h]||a==g.key)if(g[b]){e=g[b];i=5;break}else g[k]?(e=g[k],i=4):3>i&&g["default"]?(e=g["default"],i=3):3>i&&g[d]?(e=g[d],i=2):1>i&&g[h]&&(e=g[h],i=1)}switch(i){case 0:enyo.error('No translation for "'+a+'" in "'+b+'"');break;case 1:enyo.warn('No translation for "'+a+'" in "'+b+'", select source translation ("'+h+'")');break;case 2:enyo.warn('No translation for "'+a+'" in "'+b+'", select source translation ("'+d+'")');break;case 3:enyo.warn('No translation for "'+a+'" in "'+b+'", select default translation')}e=enyo.localize.pluralSearch(e,f);return enyo.macroize(e,f)};