enyo.kind({name:"enyo.localize",kind:enyo.Object,statics:{source:"en_US",destination:"fr_FR",list:[],getList:function(){return this.list},autoDetectDestination:function(){if(navigator.browserLanguage){var a=navigator.browserLanguage}else{if(navigator.language){var a=navigator.language}else{return false}}if(a.length==2){this.destination=a.toLowerCase();return true}else{if(a.length==5&&a.indexOf("-")>-1){this.destination=a.substr(0,2)+"_"+a.substr(3,3).toUpperCase();return true}else{return false}}},addArray:function(a){for(var b=0;b<a.length;b++){this.addLocalization(a[b])}},addLocalization:function(a){this.list.push(a)},pluralSearch:function(d,a){var i=/\{\$\w+\|.[^}]+\}/g;var j=i.exec(d);if(j==null){return d}var g=j[0];var e=g.split("|");e[0]=e[0].substring(1);var h=e[e.length-1];e[e.length-1]=h.substring(0,h.length-1);if(a==undefined||a.length<1){var k="*"}else{var k=(a[e[0].substring(1)]==undefined)?"*":a[e[0].substring(1)]}for(var b=1;b<e.length;b++){var f=e[b].split(":");e[b]={id:f[0],text:f[1]}}var i=new RegExp("\\"+e[0],"g");for(var b=1;b<e.length;b++){var h=e[b].text;e[b].text=h.replace(i,"{"+e[0]+"}")}var c="";for(var b=1;b<e.length;b++){if(e[b].id==k){c=e[b].text}}if(c==""){for(var b=1;b<e.length;b++){if(e[b].id=="*"){c=e[b].text}}}d=d.substring(0,d.indexOf(g))+c+d.substring(d.indexOf(g)+g.length);return this.pluralSearch(d,a)}}});enyo.T=function(a,b){var g=enyo.localize.source;var d=g.substr(0,2);var h=enyo.localize.destination;var e=h.substr(0,2);var f=a;for(var c in enyo.localize.getList()){var i=enyo.localize.getList()[c];if(a==i[g]||a==i[d]||a==i.key){if(i[h]!=undefined){f=i[h]}else{if(i[e]!=undefined){f=i[e]}else{if(i["default"]!=undefined){f=i["default"]}}}if(f!=a){continue}}}f=enyo.localize.pluralSearch(f,b);return enyo.macroize(f,b)};