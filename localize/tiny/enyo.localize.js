enyo.kind({name:"enyo.localize",kind:enyo.Object,statics:{source:"en_US",destination:"fr_FR",list:[],getList:function(){return this.list},autoDetectDestination:function(){if(navigator.browserLanguage){var a=navigator.browserLanguage}else{if(navigator.language){var a=navigator.language}else{return false}}if(a.length==2){this.destination=a.toLowerCase();return true}else{if(a.length==5&&a.indexOf("-")==2){this.destination=a.substr(0,2)+"_"+a.substr(3,2).toUpperCase();return true}else{return false}}},addArray:function(b){for(var c=0,a=b.length;c<a;c++){this.addLocalization(b[c])}},addLocalization:function(a){this.list.push(a)},pluralSearch:function(d,a){var i=/\{\$\w+\|.[^}]+\}/g;var k=i.exec(d);if(!k){return d}var g=k[0];var e=g.split("|");e[0]=e[0].substring(1);var h=e[e.length-1];e[e.length-1]=h.substring(0,h.length-1);if(!a||!a.length){var l="*"}else{var l=(!a[e[0].substring(1)])?"*":a[e[0].substring(1)]}for(var b=1,j=e.length;b<j;b++){var f=e[b].split(":");e[b]={id:f[0],text:f[1]}}var i=new RegExp("\\"+e[0],"g");for(var b=1,j=e.length;b<j;b++){var h=e[b].text;e[b].text=h.replace(i,"{"+e[0]+"}")}var c="";for(var b=1,j=e.length;b<j;b++){if(e[b].id==l){c=e[b].text}}if(!c){for(var b=1,j=e.length;b<j;b++){if(e[b].id=="*"){c=e[b].text}}}d=d.substring(0,d.indexOf(g))+c+d.substring(d.indexOf(g)+g.length);return this.pluralSearch(d,a)}}});enyo.T=function(a,b){var h=enyo.localize.source,d=h.substr(0,2),i=enyo.localize.destination,e=i.substr(0,2),g=a,c=0,f=enyo.localize.getList(),l=f.length,k=0;for(;c<l;c++){var j=f[c];if(a==j[h]||a==j[d]||a==j.key){if(j[i]){g=j[i];k=5;break}else{if(j[e]){g=j[e];k=4}else{if(k<3&&j["default"]){g=j["default"];k=3}else{if(k<2&&j[h]){g=j[h];k=2}else{if(k<1&&j[d]){g=j[d];k=1}}}}}}}switch(k){case 0:enyo.error('No translation for "'+a+'" in "'+i+'"');break;case 1:enyo.warn('No translation for "'+a+'" in "'+i+'", select source translation ("'+d+'")');break;case 2:enyo.warn('No translation for "'+a+'" in "'+i+'", select source translation ("'+h+'")');break;case 3:enyo.warn('No translation for "'+a+'" in "'+i+'", select default translation');break}g=enyo.localize.pluralSearch(g,b);return enyo.macroize(g,b)};